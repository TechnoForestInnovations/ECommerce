{% load static %}
<script src="{% static 'landing/js/script.js' %}" defer></script>
<header class="main-header">
        <!-- Left side of the header: Logo -->
        <div class="header-left">
            <a href="{% url 'home' %}" class="logo">FS Club</a>
        </div>

        <!-- Center navigation links (visible on desktop) -->
        <nav class="header-center" aria-label="Main navigation">
            <a href="{% url 'shop_by_season' %}">Shop By Season</a>
                <a href="{% url 'high_vibes' %}">High Vibes</a>
            <a href="{% url 'low_vibes' %}">Low Vibes</a>
            <a href="{% url 'accessories' %}">Accessories</a>
        </nav>

        <!-- Right side of the header -->
        <div class="header-right">
            {% if user.is_authenticated %}
            <!-- ============================ -->
            <!-- When the user IS logged in -->
            <!-- ============================ -->

            <!-- Wishlist icon (desktop only) -->
            <!-- Clicking this could open a wishlist page or modal -->
            <a href="{% url 'wishlist' %}" class="wishlist-icon" aria-label="View Wishlist">
                <i class="fas fa-heart"></i>
            </a>

            <!-- Cart icon (desktop only) -->
            <a href="{% url 'cart' %}" class="cart-icon" aria-label="View Cart">
                <i class="fas fa-shopping-cart"></i>
            </a>



            <!-- HEADER PROFILE ICON -->
            <div class="profile-dropdown">
            <!-- Button to toggle dropdown -->
            <a class="profile-icon" id="profile-btn" aria-label="Profile">
                <i class="fas fa-user-circle"></i>
            </a>

            <!-- Dropdown content -->
            <div class="profile-menu" id="profile-menu">
                <p class="user-name">Hello {{ user.username }}</p>
                <p class="user-number">{{ user.phone_number }}</p>
                <hr>
                <a href="#">Orders</a>
                <a href="#">Wishlist</a>
                <a href="#" id="contact-us">Contact Us</a>
                <hr>
                <a href="#">Track your order</a>
                <a href="#">Saved Addresses</a>
                <hr>
                <a href="#">Edit Profile</a>
                <a href="{% url 'logout' %}">Logout</a>
            </div>
            </div>
            {% else %}
            <!-- ============================ -->
            <!-- When the user is NOT logged in -->
            <!-- ============================ -->

            <!-- Show Signup/Login button instead of cart/wishlist/profile -->
            <a class="signup-button login" href="{% url 'signup' %}">Signup/Login</a>
            {% endif %}

            <!-- Hamburger menu button (shows only on mobile) -->
            <button class="menu-toggle" aria-label="Toggle navigation menu">
                <i class="fas fa-bars"></i>
            </button>
        </div>


        <!-- ================= MOBILE MENU ================= -->
        <div class="mobile-menu">
            <!-- Close button (X icon) -->
            <button class="close-menu"><i class="fas fa-times"></i></button>

            <!-- Navigation links inside mobile menu -->
            <nav aria-label="Mobile navigation">

                {% if user.is_authenticated %}
                <!-- Mobile Profile Dropdown (only visible when logged in) -->
                <div class="mobile-profile-dropdown">
                    Hey! {{ user.username }}
                </div>
                {% endif %}

                <!-- Main shop links (always visible) -->
                <a href="{% url 'shop_by_season' %}">Shop By Season</a>
                <a href="{% url 'high_vibes' %}">High Vibes</a>
                <a href="{% url 'low_vibes' %}">Low Vibes</a>
                <a href="{% url 'accessories' %}">Accessories</a>

                {% if user.is_authenticated %}
                <!-- Extra cart link for mobile (outside profile dropdown) -->
                <a href="{% url 'wishlist' %}">Wishlist</a>
                <a href="{% url 'cart' %}">Cart</a>
                <a class="mobile-logout" href="{% url 'logout' %}">Logout</a>

                {% else %}
                <!-- Show login/signup links for guests -->
                <a href="{% url 'login' %}" class="login">Login</a>
                <a href="{% url 'signup' %}" class="signup">Signup</a>
                {% endif %}
            </nav>
        </div>
    </header>
   <style>
.profile-dropdown {
  position: relative;
  display: inline-block;
}

.profile-icon {
  font-size: 24px;
  color: #333;
  cursor: pointer;
}

.profile-menu {
  display: none;
  position: absolute;
  right: 0;
  top: 120%;
  background-color: #fff;
  border: 1px solid #ddd;
  border-radius: 10px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  width: 220px;
  z-index: 1000;
  padding: 10px 0;
}

.profile-menu a {
  display: block;
  padding: 8px 16px;
  color: #333;
  text-decoration: none;
  font-size: 14px;
}

.profile-menu a:hover {
  background-color: #f5f5f5;
}

.profile-menu hr {
  margin: 8px 0;
  border: none;
  border-top: 1px solid #eee;
}

.user-name {
  font-weight: 600;
  padding: 0 16px;
}

.user-number {
  font-size: 13px;
  color: #777;
  padding: 0 16px;
  margin-bottom: 5px;
}
</style>

<script>
document.addEventListener("DOMContentLoaded", function () {
  const profileBtn = document.getElementById("profile-btn");
  const profileMenu = document.getElementById("profile-menu");

  // Toggle dropdown visibility on click
  profileBtn.addEventListener("click", function (e) {
    e.stopPropagation();
    profileMenu.style.display =
      profileMenu.style.display === "block" ? "none" : "block";
  });

  // Close dropdown when clicking outside
  document.addEventListener("click", function (e) {
    if (!profileMenu.contains(e.target) && !profileBtn.contains(e.target)) {
      profileMenu.style.display = "none";
    }
  });
  const contactUsLink = document.getElementById("contact-us");
  contactUsLink.addEventListener("click", function (e) {
    e.preventDefault();
    //scroll to bottom of the page
    window.scrollTo({
      top: document.body.scrollHeight,
      behavior: 'smooth'
    });
    if(profileMenu){
      profileMenu.style.display = "none";
    }

  });
});
</script> 